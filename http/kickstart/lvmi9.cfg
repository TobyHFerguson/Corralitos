install
cdrom
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --bootproto dhcp --noipv6
rootpw  --plaintext vagrant
firewall --service=ssh
authconfig --enableshadow --passalgo=sha512
auth --useshadow --enablemd5
selinux --enforcing
timezone --utc America/Chicago

bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"
text
skipx
zerombr
clearpart --all --initlabel
part /boot --fstype=ext4 --size=200
part pv.008002 --grow --size=1

volgroup vg_lvmi9 --pesize=4096 pv.008002
logvol /home --fstype=ext4 --name=lv_home --vgname=vg_lvmi9 --size=2048
logvol / --fstype=ext4 --name=lv_root --vgname=vg_lvmi9 --size=10024
logvol swap --name=lv_swap --vgname=vg_lvmi9 --size=2016
logvol /tmp --fstype=ext4 --name=lv_tmp --vgname=vg_lvmi9 --size=2048
logvol /var --fstype=ext4 --name=lv_var --vgname=vg_lvmi9 --size=2048

firstboot --disabled
reboot

%packages --ignoremissing --excludedocs --nobase
openssh-clients
sudo
device-mapper-persistent-data
%end

%post --log=/root/post.lvmi9-install.log
/usr/sbin/useradd vagrant
echo "vagrant"|passwd --stdin vagrant
echo "vagrant ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers.d/vagrant
chmod 0440 /etc/sudoers.d/vagrant
%end
